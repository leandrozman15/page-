<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abratecnica - Loja Online</title>
    
    <!-- Fontes modernas -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- CSS Frameworks e Bibliotecas -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.3.1/css/hover-min.css">
    
    <!-- CSS personalizado -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navegación -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="logo-abratecnica.jpg" alt="Abratecnica" class="logo-img">
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Início</a>
                </li>
                <li class="nav-item">
                    <a href="productos.html" class="nav-link">Produtos</a>
                </li>
                <li class="nav-item">
                    <a href="tienda.html" class="nav-link active">Loja</a>
                </li>
                <li class="nav-item">
                    <a href="index.html#contacto" class="nav-link">Contato</a>
                </li>
            </ul>
            <div class="cart-icon" onclick="toggleCart()">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count" id="cartCount">0</span>
            </div>
            <div class="nav-toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Header de Página -->
    <section class="page-header">
        <video class="page-header-video active" autoplay muted loop>
            <source src="1.mp4" type="video/mp4">
        </video>
        <video class="page-header-video" autoplay muted loop>
            <source src="2.mp4" type="video/mp4">
        </video>
        <video class="page-header-video" autoplay muted loop>
            <source src="3.mp4" type="video/mp4">
        </video>
        <video class="page-header-video" autoplay muted loop>
            <source src="4.mp4" type="video/mp4">
        </video>
        <video class="page-header-video" autoplay muted loop>
            <source src="5.mp4" type="video/mp4">
        </video>
        <div class="container">
            <h1>Loja Online</h1>
            <p>Compre nossos produtos técnicos com facilidade e segurança</p>
        </div>
    </section>

    <!-- Carrito lateral -->
    <div id="cartSidebar" class="cart-sidebar">
        <div class="cart-header">
            <h3>Carrinho de Compras</h3>
            <button class="close-cart" onclick="toggleCart()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Los items se agregarán dinámicamente -->
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <strong>Total: R$ <span id="cartTotal">0,00</span></strong>
            </div>
            <button class="btn btn-primary btn-checkout" onclick="proceedToCheckout()">
                Finalizar Pedido
            </button>
        </div>
    </div>

    <!-- Modal de Checkout -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content checkout-modal">
            <div class="modal-header">
                <h2>Finalizar Pedido</h2>
                <button class="close-modal" onclick="closeCheckoutModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Estados do checkout -->
            <div id="checkout-loading" class="checkout-loading" style="display: none;">
                <div class="spinner"></div>
                <p>Processando pedido...</p>
            </div>
            
            <div id="checkout-success" class="checkout-success" style="display: none;">
                <div class="success-icon">✅</div>
                <h3>Pedido Criado com Sucesso!</h3>
                <p>Número do Orçamento: <strong id="order-number"></strong></p>
                <p>Você receberá uma confirmação por email em breve.</p>
                <button onclick="closeCheckoutModal()" class="btn btn-primary">Continuar Comprando</button>
            </div>
            
            <div id="checkout-error" class="checkout-error" style="display: none;">
                <div class="error-icon">⚠️</div>
                <h3>Erro ao Processar Pedido</h3>
                <p id="checkout-error-message">Tente novamente mais tarde.</p>
                <button onclick="showCheckoutForm()" class="btn btn-primary">Tentar Novamente</button>
            </div>
            
            <!-- Formulário de checkout -->
            <div id="checkout-form" class="checkout-form">
                <div class="checkout-steps">
                    <div class="step active" data-step="1">
                        <span class="step-number">1</span>
                        <span class="step-title">Dados Pessoais</span>
                    </div>
                    <div class="step" data-step="2">
                        <span class="step-number">2</span>
                        <span class="step-title">Revisão</span>
                    </div>
                </div>
                
                <!-- Step 1: Dados do Cliente -->
                <div id="step-1" class="checkout-step active">
                    <h3>Dados Pessoais</h3>
                    <form id="customerForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="customer-name">Nome Completo *</label>
                                <input type="text" id="customer-name" name="name" required>
                                <div class="field-error" id="name-checkout-error"></div>
                            </div>
                            <div class="form-group">
                                <label for="customer-email">Email *</label>
                                <input type="email" id="customer-email" name="email" required>
                                <div class="field-error" id="email-checkout-error"></div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="customer-phone">Telefone</label>
                                <input type="tel" id="customer-phone" name="phone">
                            </div>
                            <div class="form-group">
                                <label for="customer-company">Empresa</label>
                                <input type="text" id="customer-company" name="company">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="customer-notes">Observações</label>
                            <textarea id="customer-notes" name="notes" rows="3" placeholder="Informações adicionais sobre o pedido..."></textarea>
                        </div>
                    </form>
                    <div class="step-actions">
                        <button onclick="nextStep()" class="btn btn-primary">Continuar</button>
                    </div>
                </div>
                
                <!-- Step 2: Revisão do Pedido -->
                <div id="step-2" class="checkout-step">
                    <h3>Revisão do Pedido</h3>
                    <div class="order-summary">
                        <div class="customer-info">
                            <h4>Dados do Cliente</h4>
                            <div id="customer-summary"></div>
                        </div>
                        <div class="items-summary">
                            <h4>Itens do Pedido</h4>
                            <div id="items-summary"></div>
                            <div class="total-summary">
                                <strong>Total: R$ <span id="final-total">0,00</span></strong>
                            </div>
                        </div>
                    </div>
                    <div class="step-actions">
                        <button onclick="previousStep()" class="btn btn-secondary">Voltar</button>
                        <button onclick="submitOrder()" class="btn btn-primary">Confirmar Pedido</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Filtros y búsqueda -->
    <section class="shop-filters">
        <div class="container">
            <div class="filters-row">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Buscar productos...">
                    <i class="fas fa-search"></i>
                </div>
                <div class="filter-controls">
                    <select id="categoryFilter">
                        <option value="all">Todas las categorías</option>
                        <option value="herramientas">Herramientas</option>
                        <option value="equipos">Equipos</option>
                        <option value="componentes">Componentes</option>
                        <option value="software">Software</option>
                    </select>
                    <select id="priceFilter">
                        <option value="all">Todos los precios</option>
                        <option value="0-100">$0 - $100</option>
                        <option value="100-300">$100 - $300</option>
                        <option value="300-500">$300 - $500</option>
                        <option value="500+">$500+</option>
                    </select>
                    <select id="sortBy">
                        <option value="name">Ordenar por nombre</option>
                        <option value="price-low">Precio: menor a mayor</option>
                        <option value="price-high">Precio: mayor a menor</option>
                        <option value="rating">Mejor valorados</option>
                    </select>
                </div>
            </div>
        </div>
    </section>

    <!-- Tienda de productos -->
    <section class="shop-products">
        <div class="container">
            <!-- Loading state -->
            <div id="shop-loading" class="loading-state">
                <div class="spinner"></div>
                <p>Carregando produtos da loja...</p>
            </div>
            
            <!-- Error state -->
            <div id="shop-error" class="error-state" style="display: none;">
                <div class="error-icon">⚠️</div>
                <p>Erro ao carregar produtos da loja. Tente novamente mais tarde.</p>
                <button onclick="loadShopProducts()" class="retry-btn">Tentar Novamente</button>
            </div>

            <!-- No products state -->
            <div id="shop-no-products" class="no-products-state" style="display: none;">
                <div class="no-products-icon">🛒</div>
                <p>Nenhum produto disponível na loja no momento.</p>
            </div>

            <!-- Products grid -->
            <div class="products-grid" id="shopProductsGrid" style="display: none;">
                <!-- Products will be loaded dynamically from ERP -->
                        <p class="product-description">Taladro de alta potencia con velocidad variable y mandril de 13mm</p>
                        <div class="product-rating">
                            <div class="stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <span class="rating-text">(24 reseñas)</span>
                        </div>
                        <div class="product-price">
                            <span class="current-price">$299.99</span>
                            <span class="original-price">$349.99</span>
                        </div>
                        <div class="product-actions">
                            <div class="quantity-selector">
                                <button onclick="changeQuantity(this, -1)">-</button>
                                <input type="number" value="1" min="1" max="10">
                                <button onclick="changeQuantity(this, 1)">+</button>
                            </div>
                            <button class="btn-add-cart" onclick="addToCart('taladro', 'Taladro Profesional HD-2000', 299.99, this)">
                                <i class="fas fa-cart-plus"></i> Añadir
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Producto 2 -->
                <div class="shop-product-card" data-category="herramientas" data-price="89.99" data-name="Kit Destornilladores Precisión" data-rating="4">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/350x250/27ae60/ffffff?text=Kit+Destornilladores" alt="Kit de Destornilladores">
                    </div>
                    <div class="product-info">
                        <h3>Kit Destornilladores Precisión</h3>
                        <p class="product-description">Set profesional de 32 destornilladores de precisión con estuche</p>
                        <div class="product-rating">
                            <div class="stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                            </div>
                            <span class="rating-text">(18 reseñas)</span>
                        </div>
                        <div class="product-price">
                            <span class="current-price">$89.99</span>
                        </div>
                        <div class="product-actions">
                            <div class="quantity-selector">
                                <button onclick="changeQuantity(this, -1)">-</button>
                                <input type="number" value="1" min="1" max="10">
                                <button onclick="changeQuantity(this, 1)">+</button>
                            </div>
                            <button class="btn-add-cart" onclick="addToCart('destornilladores', 'Kit Destornilladores Precisión', 89.99, this)">
                                <i class="fas fa-cart-plus"></i> Añadir
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Producto 3 -->
                <div class="shop-product-card" data-category="equipos" data-price="149.99" data-name="Multímetro Digital DM-500" data-rating="5">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/350x250/3498db/ffffff?text=Multímetro+Digital" alt="Multímetro Digital">
                        <div class="product-badges">
                            <span class="badge bestseller">Más vendido</span>
                        </div>
                    </div>
                    <div class="product-info">
                        <h3>Multímetro Digital DM-500</h3>
                        <p class="product-description">Multímetro digital de alta precisión con pantalla LCD y autorange</p>
                        <div class="product-rating">
                            <div class="stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <span class="rating-text">(31 reseñas)</span>
                        </div>
                        <div class="product-price">
                            <span class="current-price">$149.99</span>
                        </div>
                        <div class="product-actions">
                            <div class="quantity-selector">
                                <button onclick="changeQuantity(this, -1)">-</button>
                                <input type="number" value="1" min="1" max="10">
                                <button onclick="changeQuantity(this, 1)">+</button>
                            </div>
                            <button class="btn-add-cart" onclick="addToCart('multimetro', 'Multímetro Digital DM-500', 149.99, this)">
                                <i class="fas fa-cart-plus"></i> Añadir
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Producto 4 -->
                <div class="shop-product-card" data-category="equipos" data-price="899.99" data-name="Osciloscopio Digital OSC-200" data-rating="4">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/350x250/9b59b6/ffffff?text=Osciloscopio" alt="Osciloscopio">
                        <div class="product-badges">
                            <span class="badge new">Nuevo</span>
                        </div>
                    </div>
                    <div class="product-info">
                        <h3>Osciloscopio Digital OSC-200</h3>
                        <p class="product-description">Osciloscopio digital de 2 canales con ancho de banda de 200MHz</p>
                        <div class="product-rating">
                            <div class="stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                            </div>
                            <span class="rating-text">(12 reseñas)</span>
                        </div>
                        <div class="product-price">
                            <span class="current-price">$899.99</span>
                        </div>
                        <div class="product-actions">
                            <div class="quantity-selector">
                                <button onclick="changeQuantity(this, -1)">-</button>
                                <input type="number" value="1" min="1" max="10">
                                <button onclick="changeQuantity(this, 1)">+</button>
                            </div>
                            <button class="btn-add-cart" onclick="addToCart('osciloscopio', 'Osciloscopio Digital OSC-200', 899.99, this)">
                                <i class="fas fa-cart-plus"></i> Añadir
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Producto 5 -->
                <div class="shop-product-card" data-category="componentes" data-price="45.99" data-name="Kit Resistencias 1000 Piezas" data-rating="5">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/350x250/f39c12/ffffff?text=Resistencias" alt="Kit de Resistencias">
                    </div>
                    <div class="product-info">
                        <h3>Kit Resistencias 1000 Piezas</h3>
                        <p class="product-description">Kit completo de resistencias de 1/4W con valores desde 1Ω hasta 10MΩ</p>
                        <div class="product-rating">
                            <div class="stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <span class="rating-text">(67 reseñas)</span>
                        </div>
                        <div class="product-price">
                            <span class="current-price">$45.99</span>
                        </div>
                        <div class="product-actions">
                            <div class="quantity-selector">
                                <button onclick="changeQuantity(this, -1)">-</button>
                                <input type="number" value="1" min="1" max="10">
                                <button onclick="changeQuantity(this, 1)">+</button>
                            </div>
                            <button class="btn-add-cart" onclick="addToCart('resistencias', 'Kit Resistencias 1000 Piezas', 45.99, this)">
                                <i class="fas fa-cart-plus"></i> Añadir
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Producto 6 -->
                <div class="shop-product-card" data-category="software" data-price="499.99" data-name="Software CAD Professional" data-rating="5">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/350x250/2c3e50/ffffff?text=CAD+Pro" alt="Software CAD">
                    </div>
                    <div class="product-info">
                        <h3>Software CAD Professional</h3>
                        <p class="product-description">Software profesional de diseño CAD con herramientas avanzadas</p>
                        <div class="product-rating">
                            <div class="stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <span class="rating-text">(89 reseñas)</span>
                        </div>
                        <div class="product-price">
                            <span class="current-price">$499.99</span>
                            <span class="original-price">$599.99</span>
                        </div>
                        <div class="product-actions">
                            <div class="quantity-selector">
                                <button onclick="changeQuantity(this, -1)">-</button>
                                <input type="number" value="1" min="1" max="10">
                                <button onclick="changeQuantity(this, 1)">+</button>
                            </div>
                            <button class="btn-add-cart" onclick="addToCart('cad', 'Software CAD Professional', 499.99, this)">
                                <i class="fas fa-cart-plus"></i> Añadir
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal de Checkout -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeCheckout()">&times;</span>
            <div class="checkout-content">
                <h2>Finalizar Compra</h2>
                <form id="checkoutForm">
                    <div class="checkout-sections">
                        <div class="billing-info">
                            <h3>Información de Facturación</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Nombre completo</label>
                                    <input type="text" required>
                                </div>
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Dirección</label>
                                <input type="text" required>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Ciudad</label>
                                    <input type="text" required>
                                </div>
                                <div class="form-group">
                                    <label>Código Postal</label>
                                    <input type="text" required>
                                </div>
                            </div>
                        </div>
                        <div class="order-summary">
                            <h3>Resumen del Pedido</h3>
                            <div id="checkoutItems"></div>
                            <div class="order-total">
                                <div class="total-row">
                                    <span>Subtotal:</span>
                                    <span id="subtotal">$0.00</span>
                                </div>
                                <div class="total-row">
                                    <span>Envío:</span>
                                    <span>$15.00</span>
                                </div>
                                <div class="total-row total-final">
                                    <span>Total:</span>
                                    <span id="finalTotal">$0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="checkout-actions">
                        <button type="submit" class="btn btn-primary">Confirmar Pedido</button>
                        <button type="button" class="btn btn-secondary" onclick="closeCheckout()">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Abratecnica</h3>
                    <p>Soluciones técnicas profesionales para un mundo en constante evolución.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Enlaces Rápidos</h4>
                    <ul>
                        <li><a href="index.html">Inicio</a></li>
                        <li><a href="productos.html">Productos</a></li>
                        <li><a href="tienda.html">Tienda</a></li>
                        <li><a href="index.html#contacto">Contacto</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Información</h4>
                    <ul>
                        <li><a href="#">Términos y Condiciones</a></li>
                        <li><a href="#">Política de Privacidad</a></li>
                        <li><a href="#">Garantías</a></li>
                        <li><a href="#">Soporte</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Abratecnica. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript Libraries - Modernas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <script src="https://unpkg.com/scrollreveal@4.0.9/dist/scrollreveal.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/intersection-observer@0.12.2/intersection-observer.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <!-- Configuração de API -->
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>